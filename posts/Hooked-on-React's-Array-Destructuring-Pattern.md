<img src="https://hackernoon.com/drafts/r839b3sw8.png">                    <div class="paragraph">The other day I was reading up on the legendary React God Dan Ambrov&#x2019;s great but very un-TLDR <a href="https://overreacted.io/a-complete-guide-to-useeffect/#dont-lie-to-react-about-dependencies">post on useEffect</a>.</div><div class="paragraph">Sometimes I find myself faking it til I make it, which is fine but then it can come back later and bite me in the ass!</div><div class="paragraph">The transition to Hooks has been quite a confusing one actually, as most people assumed (including myself) that the changes were just about the syntax. In fact, the changes are more substantial and it involves rethinking ifecycles and how we restructure the components. This [in progress&#x2026;] <a href="https://wattenberger.com/blog/react-hooks">post</a> shows us the kind of rethinking that are needed&#x2026;</div><h2>A UseEffect Counter&#xA0;Refactor</h2><div class="paragraph">The post talks about how this is not correct, the count will always be zero.</div><div class="code-container"><pre style="display:block;overflow-x:auto;background:black;color:#eaeaea;padding:30px"><code><span style="color:#c397d8">const</span> Counter = <span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> {  <span style="color:#c397d8">const</span> [count, setCount] = useState(<span style="color:#e78c45">0</span>);  useEffect(<span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> {    <span style="color:#c397d8">const</span> id = setInterval(<span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> {      setCount(count + <span style="color:#e78c45">1</span>);    }, <span style="color:#e78c45">1000</span>);    <span style="color:#c397d8">return</span> <span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> clearInterval(id); <span style="color:#969896">// Cleanup on &apos;unmounting&apos;</span>  }, []);  <span style="color:#c397d8">return</span> <span class="xml"><span style="color:#d54e53">&lt;<span style="color:#d54e53">h1</span>&gt;</span>{count}<span style="color:#d54e53">&lt;/<span style="color:#d54e53">h1</span>&gt;</span></span>;}</code></pre></div><div class="paragraph">However putting a watcher on the count state will allow the effect to update correctly.</div><div class="code-container"><pre style="display:block;overflow-x:auto;background:black;color:#eaeaea;padding:30px"><code>useEffect(<span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> {  <span style="color:#c397d8">const</span> id = setInterval(<span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> {    setCount(count + <span style="color:#e78c45">1</span>);  }, <span style="color:#e78c45">1000</span>);  <span style="color:#c397d8">return</span> <span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> clearInterval(id);}, [count]);</code></pre></div><div class="paragraph">This is pretty much going to be the most common way that most of us will conclude with. But Dan Ambrov says that we can level up with another way which would remove the watcher completely!</div><div class="code-container"><pre style="display:block;overflow-x:auto;background:black;color:#eaeaea;padding:30px"><code>useEffect(<span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> {    <span style="color:#c397d8">const</span> id = setInterval(<span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> {      setCount(<span class="hljs-function"><span style="color:#e78c45">c</span> =&gt;</span> c + <span style="color:#e78c45">1</span>);    }, <span style="color:#e78c45">1000</span>);    <span style="color:#c397d8">return</span> <span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> clearInterval(id);  }, []);</code></pre></div><div class="paragraph">Amazing!</div><div class="paragraph">However, if your like me and have been too lazy to fully understand React&#x2019;s hooks array destructuring then your probably asking&#x2026;</div><blockquote>Where on earth does that &quot;c&quot; come from?</blockquote><div class="paragraph"></div><h2><strong>A &#x2018;New&#x2019; Trending JS&#xA0;Pattern</strong></h2><div class="paragraph">Maybe not so new, but new to a lot of us and hooks has popularized it to new levels!</div><div class="code-container"><pre style="display:block;overflow-x:auto;background:black;color:#eaeaea;padding:30px"><code><span style="color:#c397d8">const</span> [state, setState] = useState(init);</code></pre></div><div class="paragraph"><em>useState</em> is a function that returns an array of functions&#x2026;</div><div class="paragraph">For example we could mock it up like this;</div><div class="code-container"><pre style="display:block;overflow-x:auto;background:black;color:#eaeaea;padding:30px"><code><span style="color:#c397d8">const</span> useState = <span class="hljs-function">(<span style="color:#e78c45">initialState</span>) =&gt;</span> { <span style="color:#c397d8">return</span> [state(initialState), setState(initialState)]}<span style="color:#c397d8">const</span> state = <span class="hljs-function">(<span style="color:#e78c45">parameter</span>) =&gt;</span> {    <span style="color:#c397d8">return</span> <span style="color:#b9ca4a">`this is the state function with the parameter - <span class="hljs-subst">${parameter}</span>`</span>}<span style="color:#c397d8">const</span> setState = <span class="hljs-function">(<span style="color:#e78c45">parameter</span>) =&gt;</span> {    <span style="color:#c397d8">return</span> <span style="color:#b9ca4a">`this is the setState function with the parameter - <span class="hljs-subst">${parameter}</span>`</span>}</code></pre></div><div class="paragraph">Invoking use<em>State </em>would get us;</div><div class="code-container"><pre style="display:block;overflow-x:auto;background:black;color:#eaeaea;padding:30px"><code>useState(<span style="color:#e78c45">99</span>)(<span style="color:#e78c45">2</span>) [<span style="color:#b9ca4a">&quot;this is the state with the parameter - 99&quot;</span>, <span style="color:#b9ca4a">&quot;this is the setState with the function parameter - 99&quot;</span>]useState(<span style="color:#e78c45">99</span>)[<span style="color:#e78c45">0</span>]<span style="color:#b9ca4a">&quot;this is the state with the parameter - 99&quot;</span>useState(<span style="color:#e78c45">99</span>)[<span style="color:#e78c45">1</span>]<span style="color:#b9ca4a">&quot;this is the setState with the parameter - 99&quot;</span>useState(<span style="color:#e78c45">99</span>)[<span style="color:#e78c45">2</span>]<span style="color:#e78c45">undefined</span> <span style="color:#969896">// Element doesn&apos;t exist</span></code></pre></div><div class="paragraph">Destructuring allows us to rename the returned elements as what they are name to represent themselves</div><div class="code-container"><pre style="display:block;overflow-x:auto;background:black;color:#eaeaea;padding:30px"><code><span style="color:#c397d8">const</span> [state, setState] = useState(<span style="color:#e78c45">99</span>)<span style="color:#969896">// Equivalent to...</span><span style="color:#c397d8">const</span> state = useState(<span style="color:#e78c45">99</span>)[<span style="color:#e78c45">0</span>]<span style="color:#c397d8">const</span> setState = useState(<span style="color:#e78c45">99</span>)[<span style="color:#e78c45">1</span>]</code></pre></div><div class="paragraph">But in this instance we get an error;</div><div class="paragraph"><em>Uncaught SyntaxError: Identifier &#x2018;state&#x2019; has already been declared</em></div><div class="paragraph">This is because we already have used the name <em>state </em>in our function expression inside <em>useState.</em></div><div class="paragraph">Actually we can use any name we want (that isn&#x2019;t already used) to represent the first two elements of the returned array from <em>useState</em>;</div><div class="code-container"><pre style="display:block;overflow-x:auto;background:black;color:#eaeaea;padding:30px"><code><span style="color:#c397d8">const</span> [whatIsTheState, changeUpDatState] = useState(<span style="color:#e78c45">99</span>)whatIsTheState<span style="color:#b9ca4a">&quot;this is the state with the param - 99&quot;</span>changeUpDatState<span style="color:#b9ca4a">&quot;this is the setState with the param - 99&quot;</span></code></pre></div><div class="paragraph">Thanks to Ken C Dodds on his <a href="https://kentcdodds.com/blog/react-hooks-array-destructuring-fundamentals">post</a> on helping me understand this.</div><div class="paragraph"></div><h2>Rosetta Stone That&#xA0;Counter</h2><div class="paragraph">Aight, lets go back to that counter;</div><div class="code-container"><pre style="display:block;overflow-x:auto;background:black;color:#eaeaea;padding:30px"><code><span style="color:#c397d8">const</span> Counter = <span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> {  <span style="color:#c397d8">const</span> [count, setCount] = useState(<span style="color:#e78c45">0</span>);  useEffect(<span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> {    <span style="color:#c397d8">const</span> id = setInterval(<span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> {        setCount(<span class="hljs-function"><span style="color:#e78c45">c</span> =&gt;</span> c + <span style="color:#e78c45">1</span>);          }, <span style="color:#e78c45">1000</span>);      <span style="color:#c397d8">return</span> <span class="hljs-function"><span style="color:#e78c45">()</span> =&gt;</span> clearInterval(id);    }, []);    <span style="color:#c397d8">return</span> <span class="xml"><span style="color:#d54e53">&lt;<span style="color:#d54e53">h1</span>&gt;</span>{count}<span style="color:#d54e53">&lt;/<span style="color:#d54e53">h1</span>&gt;</span></span>;}</code></pre></div><div class="paragraph"><em>c</em> is the parameter of setCount, which is the initialState of useState, which is 0 for the first time round.</div><div class="paragraph">One is added to <em>c</em> and then is returned as the param for setCount, which sets the new count. This happens every second.</div><div class="paragraph">This means that useEffect is run once on load, and there is no need to keep calling useEffect on each change, as it is all happening once.</div><div class="paragraph"></div><h2>Custom Hooks Potential</h2><div class="paragraph">The power of this pattern is that it has ton of potential when you start using custom hooks. Features can be abstracted out of the components and have only the relevant data returned within those arrays to be used.</div><div class="code-container"><pre style="display:block;overflow-x:auto;background:black;color:#eaeaea;padding:30px"><code><span style="color:#c397d8">const</span> [name, age, error] = useCustomerDataAPI(key)</code></pre></div><div class="paragraph">Here this made up custom hook can be setup like this. The hook needs an api key as a parameter and then will return 3 functions which returns a name string, a number age and a boolean error.</div><div class="paragraph">These three functions are able to be used in our component, most likely using error to check if it is false and then rendering the name and age to the page.</div><div class="paragraph">I wont go into details of the custom hook itself, will probably require another post. For now, I&#x2019;m really enjoying the direction that React is going&#x2026;</div><div class="paragraph">Til next time folks, happy coding!</div>                    <h2 class="tags-header">Tags</h2>          <div class="archive-tags">                                                <a class="tag" href="https://hackernoon.com/tagged/react">React</a>                                                <a class="tag" href="https://hackernoon.com/tagged/javascript">Javascript</a>                                                <a class="tag" href="https://hackernoon.com/tagged/technology">Technology</a>                                                <a class="tag" href="https://hackernoon.com/tagged/frontend">Frontend</a>                                                <a class="tag" href="https://hackernoon.com/tagged/refactoring">Refactoring</a>                                                <a class="tag" href="https://hackernoon.com/tagged/design-patterns">Design Patterns</a>                                                <a class="tag" href="https://hackernoon.com/tagged/coding">Coding</a>                                                <a class="tag" href="https://hackernoon.com/tagged/latest-tech-stories">Latest Tech Stories</a>                      </div>                                        <div class="twitter-discussion">            <a target="_blank" href="https://community.hackernoon.com/t/14043">Continue the Discussion <i class="fas fa-comments-alt"></i></a>          </div>